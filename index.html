<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Nosso Tempo Juntos ‚Äî Isa üíô</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
:root { --bg1:#0f1327; --bg2:#0a0f22; --ink:#eef3ff; --muted:#c9d2ea; }
* { box-sizing:border-box }
body {
  margin:0; font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--ink);
  background:radial-gradient(1200px 800px at 50% -10%, #1f2d5b 0%, var(--bg1) 40%, var(--bg2) 100%);
  overflow-x:hidden;
}
.wrap { max-width:1100px; margin:0 auto; padding:36px 18px }

/* Player */
.player {
  display:flex; align-items:center; gap:12px; width:max-content;
  background:#0b122a; border:1px solid rgba(255,255,255,.08);
  padding:10px 14px; border-radius:16px; box-shadow:0 12px 30px rgba(0,0,0,.35);
}
.cover{width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg,#bfe6ff,#69c0ff)}
.title{font-weight:600}.artist{font-size:12px;opacity:.75}
.btn{
  display:inline-flex;align-items:center;gap:6px;padding:8px 10px;border-radius:12px;
  border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.08);color:#fff;cursor:pointer
}
.btn[aria-pressed="true"]{background:#133063;border-color:rgba(255,255,255,.25)}
.eq{width:10px;height:10px;border-radius:3px;display:inline-block;margin-left:6px;background:rgba(255,255,255,.6);
  animation:eq 800ms ease-in-out infinite;transform-origin:bottom}
@keyframes eq{0%{transform:scaleY(.3)}50%{transform:scaleY(1)}100%{transform:scaleY(.3)}}

/* Visualiza√ß√£o */
.viz-wrap{position:relative;width:220px;height:36px;border-radius:10px;margin-left:6px;
  border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,#0c1734,#0a132c);overflow:hidden}
#viz{width:100%;height:100%;display:block;filter:drop-shadow(0 4px 8px rgba(0,0,0,.35))}
.viz-glow{position:absolute;inset:0;pointer-events:none;box-shadow:inset 0 0 18px rgba(124,201,255,.18)}

/* Layout grid */
.grid{display:grid;grid-template-columns:1.1fr 1fr;gap:24px;margin-top:18px}
@media (max-width:980px){.grid{grid-template-columns:1fr}}

/* Phone / carousel */
.phone{
  background:linear-gradient(180deg,#111a37,#0b132a);
  border:1px solid rgba(255,255,255,.12);border-radius:26px;padding:18px;
  box-shadow:0 26px 60px rgba(0,0,0,.35);
}
.phone .frame{position:relative;aspect-ratio:9/16;border-radius:18px;overflow:hidden}
.phone img{width:100%;height:100%;object-fit:cover}
.carousel-controls{position:absolute;bottom:10px;left:0;right:0;display:flex;justify-content:center;gap:6px}
.dot{width:7px;height:7px;border-radius:999px;background:rgba(255,255,255,.35)}
.dot.active{background:#fff}

/* Panel */
.panel{
  background:linear-gradient(180deg,#0f1a3b,#0c1531);
  border:1px solid rgba(255,255,255,.12);border-radius:18px;padding:20px;
  box-shadow:0 16px 40px rgba(0,0,0,.35);
}

/* Cron√¥metro */
h2{margin:0 0 10px 0}
.digits-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:12px;margin-top:8px}
.time-box{background:linear-gradient(180deg,#111a37,#0b132a);border:1px solid rgba(255,255,255,.12);
  border-radius:18px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.06)}
.time-value{display:block;font-weight:800;font-size:34px;line-height:1}
.time-label{display:block;margin-top:6px;font-size:12px;letter-spacing:.6px;text-transform:uppercase;opacity:.7}
@keyframes tick{0%{transform:translateY(6px);filter:blur(2px);opacity:.3}100%{transform:translateY(0);filter:none;opacity:1}}
.time-value.tick{animation:tick .35s ease-out}

/* Texto */
.note{
  margin-top:16px;padding:16px;border-radius:14px;background:#0c1329;border:1px solid rgba(255,255,255,.08);line-height:1.6
}
.highlight{display:block;margin-top:14px;font-style:italic;text-align:center;font-weight:600;color:#8ab4ff;opacity:0;transform:translateY(20px);
  animation:fadeUp 3s ease forwards 1.2s}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}

.footer{margin:28px 0 10px;text-align:center;opacity:.65;font-size:12px}
</style>
</head>
<body>
<div class="wrap">
  <div class="player">
    <div class="cover"></div>
    <div>
      <div class="title">Alian√ßa</div>
      <div class="artist">Tribalistas ¬∑ Marisa Monte</div>
    </div>
    <button id="playBtn" class="btn" type="button" aria-pressed="false">‚ñ∂ Tocar</button>
    <div class="viz-wrap"><canvas id="viz"></canvas><div class="viz-glow"></div></div>
  </div>

  <div class="grid">
    <!-- Fotos -->
    <div class="phone">
      <div class="frame">
        <img id="photo" src="assets/photos/1.jpg" alt="N√≥s dois">
        <div class="carousel-controls" id="dots"></div>
      </div>
    </div>

    <!-- Painel com contador + texto -->
    <div class="panel">
      <h2>Eu te amo h√°:</h2>
      <div class="digits-grid" id="digits"></div>

      <div class="note">
        <p><strong>Isa</strong>, eu n√£o te quero por divers√£o, nem por costume.<br>
        N√£o √© pra te ferir, nem pra te usar.<br><br>
        Eu te quero pra te fazer sentir amada, segura, valorizada e feliz.<br>
        Pra te mostrar, todos os dias, o quanto voc√™ merece ser cuidada, protegida e apreciada.<br><br>
        Porque quando t√¥ perto de voc√™, tudo faz sentido ‚Äî o tempo desacelera, o mundo fica leve, e eu sinto que √© ali que eu devia estar.<br><br>
        Eu quero construir contigo, dividir vit√≥rias, superar dias dif√≠ceis e rir at√© tarde das coisas mais bobas.<br><br>
        Quando penso no futuro, n√£o imagino um lugar ‚Äî imagino a gente.<br>
        Um amor tranquilo, forte, cheio de parceria e paz.<br>
        Aquele tipo de amor que a gente cuida pra durar pra sempre. üíô</p>
        <span class="highlight">Se eu tivesse que falar sobre minha parte favorita desse ano,<br>eu falaria sobre como eu e voc√™ nos tornamos n√≥s.</span>
      </div>
    </div>
  </div>

  <div class="footer">Feito com üíô por Pedro</div>
</div>

<audio id="bgm" src="assets/music/alianca.mp3?v=build2" preload="auto" loop muted autoplay></audio>

<script>
/* ===== Contador ===== */
const START_DATE = new Date("2024-10-12T00:00:00-03:00");
function diffParts(from,to){
  let years=0,months=0; const d=new Date(from);
  while(new Date(d.getFullYear()+1,d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())<=to){d.setFullYear(d.getFullYear()+1);years++;}
  while(new Date(d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())<=to){d.setMonth(d.getMonth()+1);months++;}
  const ms=to-d, s=Math.floor(ms/1000);
  const days=Math.floor(s/86400), hours=Math.floor((s%86400)/3600), minutes=Math.floor((s%3600)/60), seconds=s%60;
  return {years,months,days,hours,minutes,seconds};
}
function two(n){return n.toString().padStart(2,'0');}
const PARTS=[["Anos","years"],["Meses","months"],["Dias","days"],["Horas","hours"],["Minutos","minutes"],["Segundos","seconds"]];
function renderDigits(){
  const now=new Date(), p=diffParts(START_DATE, now), el=document.getElementById("digits");
  if(!el.dataset.built){
    el.innerHTML=PARTS.map(([l,k])=>`<div class="time-box"><span class="time-value" id="v-${k}">00</span><span class="time-label">${l}</span></div>`).join("");
    el.dataset.built="1";
  }
  PARTS.forEach(([_,k])=>{
    const node=document.getElementById(`v-${k}`);
    const v=(k==="years"||k==="months")? String(p[k]) : two(p[k]);
    if(node.textContent!==v){ node.textContent=v; node.classList.remove("tick"); void node.offsetWidth; node.classList.add("tick"); }
  });
}
setInterval(renderDigits,1000); renderDigits();

/* ===== Carrossel ===== */
const PHOTOS = [
  "assets/photos/1.jpg",
  "assets/photos/2.jpg",
  "assets/photos/3.jpg",
  "assets/photos/4.jpg",
  "assets/photos/5.jpg"
];
let idx = 0;
const photo = document.getElementById("photo");
const dots = document.getElementById("dots");
function setPhoto(i){
  idx = (i + PHOTOS.length) % PHOTOS.length;
  photo.src = PHOTOS[idx];
  Array.from(dots.children).forEach((d,j)=> d.classList.toggle("active", j===idx));
}
PHOTOS.forEach((_,i)=>{
  const d = document.createElement("div");
  d.className = "dot" + (i===0 ? " active" : "");
  d.addEventListener("click", ()=> setPhoto(i));
  dots.appendChild(d);
});
setInterval(()=> setPhoto(idx+1), 5000);
setPhoto(0);

/* ===== √Åudio + visualiza√ß√£o ===== */
const audio=document.getElementById('bgm');
const playBtn=document.getElementById('playBtn');
const canvas=document.getElementById('viz'); const ctx=canvas.getContext('2d');
let audioCtx, analyser, dataArray, rafId;

function resizeCanvas(){
  const dpr=window.devicePixelRatio||1; canvas.width=canvas.clientWidth*dpr; canvas.height=canvas.clientHeight*dpr; ctx.setTransform(dpr,0,0,dpr,0,0);
}
resizeCanvas(); window.addEventListener('resize', resizeCanvas);

function makeAudioGraph(){
  if(audioCtx) return;
  audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  const src=audioCtx.createMediaElementSource(audio);
  analyser=audioCtx.createAnalyser(); analyser.fftSize=512; dataArray=new Uint8Array(analyser.frequencyBinCount);
  src.connect(analyser); analyser.connect(audioCtx.destination);
}
function drawViz(){
  if(!analyser) return; rafId=requestAnimationFrame(drawViz); analyser.getByteFrequencyData(dataArray);
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const w=canvas.clientWidth, h=canvas.clientHeight, bars=32, step=Math.floor(dataArray.length/bars), bw=w/bars;
  for(let i=0;i<bars;i++){
    const v=dataArray[i*step]/255; const bh=Math.max(2, v*(h-4)); const x=i*bw+2, y=h-bh-2;
    ctx.fillStyle=`rgba(${Math.floor(90+80*v)}, ${Math.floor(170+60*v)}, 255, ${0.65+0.25*v})`;
    ctx.fillRect(x,y,bw-4,bh);
    ctx.fillStyle=`rgba(255,255,255,${0.12*v})`; ctx.fillRect(x,y,bw-4,2);
  }
}
function startViz(){ makeAudioGraph(); cancelAnimationFrame(rafId); drawViz(); }

function fadeTo(vol=0.6, ms=800){
  const step=50, inc=(vol-audio.volume)/(ms/step);
  const id=setInterval(()=>{ audio.volume=Math.min(vol, audio.volume+inc); if(audio.volume>=vol-0.01) clearInterval(id); }, step);
}
audio.volume=0; audio.play().catch(()=>{});
function unlock(){
  if(audio.muted){ audio.muted=false; if(audio.paused) audio.play().catch(()=>{}); fadeTo(0.6,900); startViz();
    playBtn.setAttribute('aria-pressed','true'); playBtn.innerHTML='‚è∏ Pausar <span class="eq"></span>'; }
  window.removeEventListener('click', unlock); window.removeEventListener('touchstart', unlock); window.removeEventListener('keydown', unlock);
}
window.addEventListener('click', unlock, {once:true});
window.addEventListener('touchstart', unlock, {once:true});
window.addEventListener('keydown', unlock, {once:true});
playBtn.addEventListener('click', ()=>{
  if(audio.paused){ audio.muted=false; audio.play().then(()=>{ fadeTo(0.6,400); startViz();
    playBtn.setAttribute('aria-pressed','true'); playBtn.innerHTML='‚è∏ Pausar <span class="eq"></span>'; }).catch(()=>{}); }
  else { audio.pause(); playBtn.setAttribute('aria-pressed','false'); playBtn.textContent='‚ñ∂ Tocar'; cancelAnimationFrame(rafId); }
});
</script>
</body>
</html>
