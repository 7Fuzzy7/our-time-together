<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Nosso Tempo Juntos ‚Äî Büíô</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
:root { --bg1:#0f1327; --bg2:#0a0f22; --ink:#eef3ff; --muted:#c9d2ea; }
* { box-sizing:border-box }
body {
  margin:0; font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--ink);
  background:radial-gradient(1200px 800px at 50% -10%, #1f2d5b 0%, var(--bg1) 40%, var(--bg2) 100%);
  overflow-x:hidden;
}
.wrap { max-width:1100px; margin:0 auto; padding:36px 18px }

/* player */
/* player ‚Äî harm√¥nico com o painel principal */
.player {
  display:flex;
  align-items:center;
  gap:12px;
  background: linear-gradient(180deg,#111a37,#0b132a);
  border:1px solid rgba(255,255,255,.10);
  padding:10px 14px;
  border-radius:16px;
  box-shadow:0 12px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05);
  width:max-content;
}
/* Capa do player ‚Äî usa o JPG correto */
.cover{
  width:40px;
  height:40px;
  border-radius:8px;
  background: #0c1734 url('public/music/deixa-cover.jpg?v=2') center / cover no-repeat;
  box-shadow:0 10px 20px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
}
.title { font-weight:600; color:#eef3ff; }
.artist { font-size:12px; opacity:.7; color:#c9d2ea; }

.btn {
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  color:#fff;
  cursor:pointer;
  transition:all .25s ease;
}
.btn:hover {
  background: rgba(255,255,255,.12);
  transform: translateY(-1px);
}
.btn[aria-pressed="true"] {
  background: linear-gradient(135deg,#1f305e,#304972);
  border-color: rgba(255,255,255,.25);
}
.eq {
  width:10px;
  height:10px;
  border-radius:3px;
  display:inline-block;
  margin-left:6px;
  background:rgba(255,255,255,.6);
  animation:eq 800ms ease-in-out infinite;
  transform-origin:bottom;
}
@keyframes eq { 
  0%{transform:scaleY(.3)} 
  50%{transform:scaleY(1)} 
  100%{transform:scaleY(.3)} 
}

/* visualizador */
.viz-wrap { position:relative; width:220px; height:36px; border-radius:10px; margin-left:6px;
  border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg,#0c1734,#0a132c); overflow:hidden }
#viz { width:100%; height:100%; display:block; filter:drop-shadow(0 4px 8px rgba(0,0,0,.35)) }
.viz-glow { position:absolute; inset:0; pointer-events:none; box-shadow:inset 0 0 18px rgba(124,201,255,.18) }

/* layout principal com carrossel + painel */
.grid{display:grid; grid-template-columns:1fr 1fr; gap:24px; margin-top:22px}
@media (max-width:980px){ .grid{grid-template-columns:1fr} }

/* phone/carrossel */
.phone{
  background:linear-gradient(180deg,#111a37,#0b132a);
  border:1px solid rgba(255,255,255,.12);border-radius:26px;padding:18px;
  box-shadow:0 26px 60px rgba(0,0,0,.35);
}
.phone .frame{position:relative;aspect-ratio:9/16;border-radius:18px;overflow:hidden;min-height: 420px;background: #0b132a;}
.phone img{width:100%;height:100%;object-fit:cover}
.carousel-controls{position:absolute;bottom:10px;left:0;right:0;display:flex;justify-content:center;gap:6px}
.dot{width:7px;height:7px;border-radius:999px;background:rgba(255,255,255,.35)}
.dot.active{background:#fff}

/* painel √† direita */
.panel{
  background:linear-gradient(180deg,#0f1a3b,#0c1531);
  border:1px solid rgba(255,255,255,.12);border-radius:18px;padding:20px;
  box-shadow:0 16px 40px rgba(0,0,0,.35);
}

h2 { margin:0 0 10px 0 }
.digits-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(130px,1fr)); gap:12px; margin-top:8px }
.time-box { background:linear-gradient(180deg,#111a37,#0b132a); border:1px solid rgba(255,255,255,.12);
  border-radius:18px; padding:14px; box-shadow:0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.06) }
.time-value { display:block; font-weight:800; font-size:34px; line-height:1 }
.time-label { display:block; margin-top:6px; font-size:12px; letter-spacing:.6px; text-transform:uppercase; opacity:.7 }
@keyframes tick { 0%{ transform:translateY(6px); filter:blur(2px); opacity:.3 } 100%{ transform:translateY(0); filter:none; opacity:1 } }
.time-value.tick { animation: tick .35s ease-out;
  transition: color 0.3s ease;
  color: #8ab4ff }

.note { margin-top:16px; padding:16px; border-radius:14px; background:#0c1329; border:1px solid rgba(255,255,255,.08);
  line-height:1.6; position:relative; overflow:hidden }
.highlight { display:block; margin-top:14px; font-style:italic; text-align:center; font-weight:600; color:#8ab4ff;
  opacity:0; transform:translateY(20px); animation:fadeUp 3s ease forwards 1.2s }
@keyframes fadeUp { to{ opacity:1; transform:translateY(0) } }

.footer { text-align:center; margin:28px 0 10px; opacity:.65; font-size:12px }

/* cora√ß√µes de fundo */
.heart { position: fixed; bottom: -10px; color: rgba(255,255,255,0.15); font-size: 22px;
  animation: floatUp linear forwards; z-index: 0; pointer-events: none }
@keyframes floatUp { from { transform: translateY(0) scale(1); opacity: 1 } to { transform: translateY(-120vh) scale(1.6); opacity: 0 } }

/* =========================
   MOBILE / TABLET TWEAKS
   ========================= */
@media (max-width: 980px) {
  .wrap { max-width: 100%; padding: 18px 14px; }

  /* Empilha o conte√∫do: foto em cima, texto embaixo */
  .grid {
    grid-template-columns: 1fr;
    gap: 16px;
    margin-top: 16px;
  }

  /* Player ocupa toda a largura e fica mais ‚Äútoc√°vel‚Äù */
  .player {
    width: 100%;
    padding: 12px;
    border-radius: 14px;
    gap: 10px;
  }
  .cover { width: 44px; height: 44px; border-radius: 10px; }
  .title { font-size: 15px; }
  .artist { font-size: 12px; }
  .btn { padding: 8px 10px; font-size: 14px; }
  /* Visualizador: reduz para caber bonito; se quiser esconder, troque display por none */
  .viz-wrap { width: 150px; height: 28px; }

  /* Cart√£o do ‚Äúcelular‚Äù */
  .phone { padding: 12px; border-radius: 20px; }
  .phone .frame {
    /* usa dvh: altura da viewport ‚Äúdin√¢mica‚Äù no mobile, evitando corte pela barra de endere√ßo */
    height: min(68dvh, 560px);
    aspect-ratio: unset;   /* libera o ratio para privilegiar a altura */
    border-radius: 14px;
  }
  .carousel-controls { bottom: 8px; }
  .dot { width: 6px; height: 6px; }

  /* Painel de texto */
  .panel {
    padding: 14px;
    border-radius: 16px;
  }
  h2 { font-size: 18px; margin: 0 0 8px; }

  /* Caixinhas do contador: 2 por linha em telas estreitas */
  .digits-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
  }
  .time-box { padding: 12px; border-radius: 14px; }
  .time-value { font-size: 26px; }
  .time-label { font-size: 11px; letter-spacing: .4px; }

  /* Texto */
  .note { padding: 12px; border-radius: 12px; line-height: 1.55; }
  .highlight { font-size: 13px; }
  .footer { font-size: 11px; margin: 18px 0 8px; }
}

@media (max-width: 560px) {
  /* Em celulares bem estreitos, 1 por linha nas caixinhas */
  .digits-grid { grid-template-columns: 1fr; }
  .time-value { font-size: 24px; }
  .viz-wrap { width: 120px; height: 24px; }
  .title { font-size: 14px; }
}

/* iOS safe tap sizes e ‚Äúsuaviza√ß√£o‚Äù geral */
@media (hover: none) and (pointer: coarse) {
  .btn { padding: 10px 12px; }
  .dot { width: 7px; height: 7px; }
}
/* ===== AJUSTE DO REL√ìGIO NO MOBILE ===== */
@media (max-width: 980px) {
  /* Centraliza o t√≠tulo e o rel√≥gio */
  .panel h2 {
    text-align: center;
    font-size: 18px;
  }

  /* Garante que as caixas fiquem proporcionais */
  .digits-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* duas por linha */
    gap: 10px;
    justify-items: center;
    align-items: stretch;
    margin-top: 12px;
  }

  /* Caixas mais suaves e com boa propor√ß√£o */
  .time-box {
    width: 100%;
    max-width: 150px;
    text-align: center;
    border-radius: 14px;
    padding: 12px 8px;
    background: linear-gradient(180deg,#111a37,#0b132a);
    box-shadow: 0 8px 18px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.06);
  }

  /* Valor do tempo */
  .time-value {
    font-size: 28px;
    font-weight: 700;
    line-height: 1.2;
  }

  /* R√≥tulo (Anos, Meses...) */
  .time-label {
    font-size: 12px;
    letter-spacing: 0.5px;
    opacity: .8;
    text-transform: uppercase;
    margin-top: 4px;
  }
}

@media (max-width: 600px) {
  /* Em telas pequenas, uma por linha */
  .digits-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .time-box {
    max-width: 260px;
  }

  .time-value {
    font-size: 26px;
  }

  .time-label {
    font-size: 11px;
  }
}

</style>
</head>
<body>
<div class="wrap">
 <!-- PLAYER -->
<div class="player">
  <div class="cover"></div>
  <div>
    <div class="title">Deixa</div>
    <div class="artist">Lagum ¬∑ feat. Ana Gabriela</div>
  </div>
  <button id="playBtn" class="btn" type="button" aria-pressed="false">‚ñ∂ Tocar</button>
  <div class="viz-wrap"><canvas id="viz"></canvas><div class="viz-glow"></div></div>
</div>

<!-- √ÅUDIO (troca de faixa) -->
<audio id="bgm" src="public/music/deixa-ana-gabriela.mp3?v=2" preload="auto" loop muted autoplay></audio>

  <!-- GRID: carrossel + painel -->
  <div class="grid">
    <!-- carrossel -->
    <div class="phone">
      <div class="frame">
        <img id="photo" src="public/photos/1.jpg" alt="N√≥s dois">
        <div class="carousel-controls" id="dots"></div>
      </div>
    </div>

    <!-- painel direita -->
    <div class="panel">
      <h2>A gente se conhece h√°:</h2>
      <div class="digits-grid" id="digits"></div>

      <div class="note">
        <p id="typedText"></p>
        <span class="highlight">Se eu tivesse que escolher o melhor momento do ano,<br>seria o instante em que a gente virou ‚Äún√≥s‚Äù.</span>
      </div>
    </div>
  </div>

  <div class="footer">Feito com üíô por Juninho</div>
</div>

<script>
/* ===== CONFIGURA√á√ïES ===== */
const START_DATE = new Date("2024-10-12T08:00:00-03:00");
const PHOTOS = [
  "public/photos/1.jpg",
  "public/photos/2.jpg",
  "public/photos/3.jpg",
  "public/photos/4.jpg",
  "public/photos/5.jpg"
];

/* ===== CONTADOR ===== */
function diffParts(from,to){
  let y=0,m=0; const d=new Date(from);
  while(new Date(d.getFullYear()+1,d.getMonth(),d.getDate())<=to){d.setFullYear(d.getFullYear()+1);y++;}
  while(new Date(d.getFullYear(),d.getMonth()+1,d.getDate())<=to){d.setMonth(d.getMonth()+1);m++;}
  const ms=to-d, s=Math.floor(ms/1000), days=Math.floor(s/86400),
        h=Math.floor((s%86400)/3600), min=Math.floor((s%3600)/60), sec=s%60;
  return {years:y, months:m, days, hours:h, minutes:min, seconds:sec};
}
function two(n){return n.toString().padStart(2,'0');}
const PARTS=[["Anos","years"],["Meses","months"],["Dias","days"],["Horas","hours"],["Minutos","minutes"],["Segundos","seconds"]];
function renderDigits(){
  const now=new Date(), p=diffParts(START_DATE, now), el=document.getElementById("digits");
  if(!el.dataset.built){
    el.innerHTML=PARTS.map(([l,k])=>`<div class="time-box"><span class="time-value" id="v-${k}">00</span><span class="time-label">${l}</span></div>`).join("");
    el.dataset.built="1";
  }
  PARTS.forEach(([_,k])=>{
    const node=document.getElementById(`v-${k}`);
    const v=(k==="years"||k==="months")? String(p[k]) : two(p[k]);
    if(node.textContent!==v){ node.textContent=v; node.classList.remove("tick"); void node.offsetWidth; node.classList.add("tick"); }
  });
}
setInterval(renderDigits,1000); renderDigits();

/* ===== DIGITA√á√ÉO (vers√£o 2 minimalista) ===== */
const lines = [
  "Vida, √© simples: contigo tudo faz sentido.",
  "Te ver sorrir muda meu dia. Te ouvir me acalma. Te abra√ßar me faz sentir inteiro.",
  "Gosto da nossa leveza, do jeito que rimos de tudo e do quanto crescemos juntos.",
  "Quero continuar dividindo sonhos, planos e aquele tempo de qualidade que sempre vira boas lembran√ßas .",
  "O tempo passa, mas com voc√™ cada instante vale por mil. üíô"
];
const target = document.getElementById("typedText");
let line = 0, idx = 0;
function type() {
  if (line < lines.length) {
    if (idx < lines[line].length) {
      target.innerHTML += lines[line][idx++]; setTimeout(type, 32);
    } else {
      target.innerHTML += "<br><br>"; line++; idx = 0; setTimeout(type, 520);
    }
  }
}
setTimeout(type, 900);

/* ===== CARROSSEL ===== */
let idxPhoto = 0;
const photo = document.getElementById("photo");
const dots = document.getElementById("dots");
function setPhoto(i){
  idxPhoto = (i+PHOTOS.length)%PHOTOS.length;
  photo.src = PHOTOS[idxPhoto];
  Array.from(dots.children).forEach((d, j)=> d.classList.toggle("active", j===idxPhoto));
}
PHOTOS.forEach((_,i)=>{
  const d = document.createElement("div");
  d.className = "dot"+(i===0?" active":"");
  d.addEventListener("click", ()=>setPhoto(i));
  dots.appendChild(d);
});
setInterval(()=>setPhoto(idxPhoto+1), 5000);
setPhoto(0);

/* ===== √ÅUDIO + VIZ ===== */
const audio=document.getElementById('bgm');
const playBtn=document.getElementById('playBtn');
const canvas=document.getElementById('viz'); const ctx=canvas.getContext('2d');
let audioCtx, analyser, dataArray, rafId;

function resizeCanvas(){ const dpr=window.devicePixelRatio||1; canvas.width=canvas.clientWidth*dpr; canvas.height=canvas.clientHeight*dpr; ctx.setTransform(dpr,0,0,dpr,0,0);}
resizeCanvas(); window.addEventListener('resize', resizeCanvas);
function makeAudioGraph(){ if(audioCtx) return;
  audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  const src=audioCtx.createMediaElementSource(audio);
  analyser=audioCtx.createAnalyser(); analyser.fftSize=512; dataArray=new Uint8Array(analyser.frequencyBinCount);
  src.connect(analyser); analyser.connect(audioCtx.destination);
}
function drawViz(){ if(!analyser) return; rafId=requestAnimationFrame(drawViz); analyser.getByteFrequencyData(dataArray);
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const w=canvas.clientWidth, h=canvas.clientHeight, bars=32, step=Math.floor(dataArray.length/bars), bw=w/bars;
  for(let i=0;i<bars;i++){ const v=dataArray[i*step]/255; const bh=Math.max(2, v*(h-4)); const x=i*bw+2, y=h-bh-2;
    ctx.fillStyle=`rgba(${Math.floor(90+80*v)}, ${Math.floor(170+60*v)}, 255, ${0.65+0.25*v})`; ctx.fillRect(x,y,bw-4,bh);
    ctx.fillStyle=`rgba(255,255,255,${0.12*v})`; ctx.fillRect(x,y,bw-4,2);
  }
}
function startViz(){ makeAudioGraph(); cancelAnimationFrame(rafId); drawViz(); }
function fadeTo(vol=0.6, ms=800){ const step=50, inc=(vol-audio.volume)/(ms/step);
  const id=setInterval(()=>{ audio.volume=Math.min(vol, audio.volume+inc); if(audio.volume>=vol-0.01) clearInterval(id); }, step);
}
audio.volume=0; audio.play().catch(()=>{});
function unlock(){
  if(audio.muted){ audio.muted=false; if(audio.paused) audio.play().catch(()=>{}); fadeTo(0.6,900); startViz();
    playBtn.setAttribute('aria-pressed','true'); playBtn.innerHTML='‚è∏ Pausar <span class="eq"></span>'; }
  window.removeEventListener('click', unlock); window.removeEventListener('touchstart', unlock); window.removeEventListener('keydown', unlock);
}
window.addEventListener('click', unlock, {once:true});
window.addEventListener('touchstart', unlock, {once:true});
window.addEventListener('keydown', unlock, {once:true});
playBtn.addEventListener('click', ()=>{ if(audio.paused){ audio.muted=false; audio.play().then(()=>{ fadeTo(0.6,400); startViz();
  playBtn.setAttribute('aria-pressed','true'); playBtn.innerHTML='‚è∏ Pausar <span class="eq"></span>'; }).catch(()=>{}); }
  else { audio.pause(); playBtn.setAttribute('aria-pressed','false'); playBtn.textContent='‚ñ∂ Tocar'; cancelAnimationFrame(rafId); } });

/* ===== CORA√á√ïES ===== */
function spawnHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.textContent = "üíô";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (14 + Math.random() * 24) + "px";
  heart.style.animationDuration = (6 + Math.random() * 6) + "s";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 12000);
}
setInterval(spawnHeart, 800);

/* ===== CONTROLE POR TOQUE (mobile swipe) ===== */
let touchStartX = 0;
let touchEndX = 0;
const frame = document.querySelector(".frame");

frame.addEventListener("touchstart", (e) => {
  touchStartX = e.changedTouches[0].screenX;
}, false);

frame.addEventListener("touchend", (e) => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
}, false);

function handleSwipe() {
  const diff = touchEndX - touchStartX;
  if (Math.abs(diff) > 50) {
    if (diff > 0) {
      // arrastou para a direita ‚Üí foto anterior
      setPhoto(idxPhoto - 1);
    } else {
      // arrastou para a esquerda ‚Üí pr√≥xima foto
      setPhoto(idxPhoto + 1);
    }
  }
}
/* ===== Ajuste de altura em vh para alguns navegadores m√≥veis ===== */
(function() {
  const setVH = () => {
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
  };
  setVH();
  window.addEventListener('resize', setVH);
})();

/* Exemplo de uso (se quiser): 
   .phone .frame { height: calc(var(--vh) * 68); } 
   (Se usar isso, remova/ajuste o height com dvh no CSS) */

</script>
</body>
</html>
